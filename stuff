
//Define a new Collection on both the client and the server
ProjectsCollection = new Mongo.Collection("projects");


// Publish and Subscribe
/*
Use Meteor.publish and Meteor.subscribe to control what documents flow from the server to its clients

Meteor servers can publish sets of documents with Meteor.publish, and clients can subscribe to those publications with Meteor.subscribe. Any documents the client subscribes to will be available through the find method of client collections.

Clients call Meteor.subscribe to express interest in document collections published by the server. Clients can further filter these collections of documents by calling collection.find(query). Whenever any data that was accessed by a publish function changes on the server, the publish function is automatically rerun and the updated document collections are pushed to the subscribed client.
*/

//Server
// Publish all projects owned by the user or shared to them by others
Meteor.publish("posts", function () {
  return Posts.find({
    $or: [
      { sharedToMe: {$eq: true} },
      { createdBy: this.userId }
    ]
  });
});

// Publish a single project
Meteor.publish("project", function (postId) {
  // Check argument
  check(postId, String);

  return Posts.find({
    _id: postId,
  });
});


// Client

// Subscribe to the data published by the server
Meteor.subscribe("posts");

Meteor.subscribe("posts", id);

// Any documents the client subscribes to will be available through the find method of client collections.

Templates.projects_list_template.Helpers({
    projectslist: function() {
        Return ProjectsCollection.find()
    },
    Project: function(id) {
        Return ProjectCollection
    }
});


#####

// Pass data into a template

{{> message text='Message text'}}


or

Template.messages.helpers({
  messages: [
    { text: "All these messages" },
    { text: "Uses the same template" },
    { text: "But have a different data context" },
    { text: "It's why these messages are all different!" },
    { text: "Hey!" },
    { text: "What's up man!" },
    { text: "Hello" }
  ]
});

{{#each messages}}
    {{> message text=text}}
{{/each}}


-----------
Meteor Simple Schema

------------------
//Define a new Collection on both the client and the server
Messages = new Mongo.Collection("messages");

// Insert a document
Messages.insert({greeting: "hello"}, function() {});

// Mongo shell inside meteor
meteor mongo
show databases
-> You should see a meteor database
show collections
-> should see a messages Collection

// Display all documents in the messages collection
db.messages.find()



--------------------
If you want to delete your entire database and start from scratch, quit your application and run meteor reset

Robomongo is the MongoDB management tool.

-------------------------------
